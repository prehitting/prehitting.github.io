{
    "version": "https://jsonfeed.org/version/1",
    "title": "不利索の鸣 • All posts by \"swagger\" tag",
    "description": "欢迎来到鸣崽的空间，这里不仅有学习，还有生活",
    "home_page_url": "https://prehitting.gitee.io",
    "items": [
        {
            "id": "https://prehitting.gitee.io/2022/05/06/Swagger%E9%85%8D%E7%BD%AE/",
            "url": "https://prehitting.gitee.io/2022/05/06/Swagger%E9%85%8D%E7%BD%AE/",
            "title": "Swagger配置",
            "date_published": "2022-05-06T05:19:32.000Z",
            "content_html": "<blockquote>\n<p>一款致力于解决接口规范化，标准化，文档化的开源库<br>\n一款可以根据 restful 风格生成的接口开发文档，并且支持做测试的一款中间软件</p>\n</blockquote>\n<p>使用 Swagger 你只需要按照它的规范去定义接口以及接口相关信息，再通过 Swagger 衍生出一系列的项目和工具，生成接口文档</p>\n<h2 id=\"springboot项目嵌入swagger\"><a class=\"markdownIt-Anchor\" href=\"#springboot项目嵌入swagger\">#</a> SpringBoot 项目嵌入 Swagger</h2>\n<h3 id=\"引入依赖\"><a class=\"markdownIt-Anchor\" href=\"#引入依赖\">#</a> 引入依赖</h3>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.springfox<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>springfox-swagger2<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.springfox<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>springfox-swagger-ui<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">          <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"创建配置swagger配置类\"><a class=\"markdownIt-Anchor\" href=\"#创建配置swagger配置类\">#</a> 创建配置 Swagger 配置类</h3>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableSwagger2</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">SwaggerConfig</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//配置Swagger2的Bean实例</span></span><br><span class=\"line\">    <span class=\"meta\">@Bean</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> Docket <span class=\"title function_\">docket</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class=\"line\">                .apiInfo(apiInfo())</span><br><span class=\"line\">                <span class=\"comment\">//是否启用Swagger</span></span><br><span class=\"line\">                .enable(<span class=\"literal\">true</span>)</span><br><span class=\"line\">                .select()</span><br><span class=\"line\">                <span class=\"comment\">//RequestHandlerSelectors配置要扫描接口的方式</span></span><br><span class=\"line\">                <span class=\"comment\">//basePackage指定要扫描的包</span></span><br><span class=\"line\">                <span class=\"comment\">//any()扫描全部</span></span><br><span class=\"line\">                <span class=\"comment\">//none()不扫描</span></span><br><span class=\"line\">                <span class=\"comment\">//withClassAnnotation:扫描类上的注解</span></span><br><span class=\"line\">                <span class=\"comment\">//withMethodAnnotation:扫描方法上的注解</span></span><br><span class=\"line\">                .apis(RequestHandlerSelectors.basePackage(<span class=\"string\">&quot;com.bigcat.admin.cnotroller&quot;</span>))</span><br><span class=\"line\">                <span class=\"comment\">//path()过滤路径</span></span><br><span class=\"line\">                .paths(PathSelectors.ant(<span class=\"string\">&quot;/bigcat/**&quot;</span>))</span><br><span class=\"line\">                .build();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//配置Swagger信息 apiInfo</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> ApiInfo <span class=\"title function_\">apiInfo</span><span class=\"params\">()</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ApiInfo</span>(<span class=\"string\">&quot;Api Documentation标题&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;Api Documentation描述&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;1.0&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;https://blog.kuangstudy.com/&quot;</span>,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">Contact</span>(<span class=\"string\">&quot;YiMing&quot;</span>,<span class=\"string\">&quot;https://blog.kuangstudy.com&quot;</span>,<span class=\"string\">&quot;248099287@qq.com&quot;</span>),</span><br><span class=\"line\">                <span class=\"string\">&quot;Apache 2.0&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;https://www.apache.org/licenses/LICENSE-2.0&quot;</span>,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h2 id=\"关于高版本springboot整合swagger2出现error的解决方案\"><a class=\"markdownIt-Anchor\" href=\"#关于高版本springboot整合swagger2出现error的解决方案\">#</a> 关于高版本 SpringBoot 整合 Swagger2 出现 Error 的解决方案</h2>\n<h3 id=\"方案一\"><a class=\"markdownIt-Anchor\" href=\"#方案一\">#</a> 方案一：</h3>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">spring:</span></span><br><span class=\"line\">\t<span class=\"attr\">mvc:</span></span><br><span class=\"line\">    \t<span class=\"attr\">pathmatch:</span></span><br><span class=\"line\">      \t\t<span class=\"attr\">matching-strategy:</span> <span class=\"string\">ANT_PATH_MATCHER</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"方案二\"><a class=\"markdownIt-Anchor\" href=\"#方案二\">#</a> 方案二：</h3>\n<p>配置 WebMvcConfigure.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">WebMvcConfigurer</span> <span class=\"keyword\">extends</span> <span class=\"title class_\">WebMvcConfigurationSupport</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 发现如果继承了WebMvcConfigurationSupport，则在yml中配置的相关内容会失效。 需要重新指定静态资源</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addResourceHandlers</span><span class=\"params\">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;/**&quot;</span>).addResourceLocations(</span><br><span class=\"line\">                <span class=\"string\">&quot;classpath:/static/&quot;</span>);</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;swagger-ui.html&quot;</span>, <span class=\"string\">&quot;doc.html&quot;</span>).addResourceLocations(</span><br><span class=\"line\">                <span class=\"string\">&quot;classpath:/META-INF/resources/&quot;</span>);</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;/webjars/**&quot;</span>).addResourceLocations(</span><br><span class=\"line\">                <span class=\"string\">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class=\"line\">        <span class=\"built_in\">super</span>.addResourceHandlers(registry);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"swagger增强\"><a class=\"markdownIt-Anchor\" href=\"#swagger增强\">#</a> Swagger 增强</h2>\n<p>knife4j 是为 Java MVC 框架集成 Swagger 生成 Api 文档的增强解决方案</p>\n<p><strong>引入依赖</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.github.xiaoymin<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>knife4j-spring-boot-starter<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.0.3<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>在 WebMvcConfig 类上加入注解</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@EnableSwagger2</span></span><br><span class=\"line\"><span class=\"meta\">@EnableKnife4j</span></span><br></pre></td></tr></table></figure>\n<p>在 WebMvcConfig 类中增加如下方法</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * Swagger2</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"meta\">@Bean</span></span><br><span class=\"line\">   <span class=\"keyword\">public</span> Docket <span class=\"title function_\">createRestApi</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class=\"line\">               .apiInfo(apiInfo())</span><br><span class=\"line\">               .select()</span><br><span class=\"line\">               .apis(RequestHandlerSelectors.basePackage(<span class=\"string\">&quot;com.prehitting.admin.controller&quot;</span>))</span><br><span class=\"line\">               .paths(PathSelectors.any())</span><br><span class=\"line\">               .build();</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">private</span> ApiInfo <span class=\"title function_\">apiInfo</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"title class_\">ApiInfoBuilder</span>()</span><br><span class=\"line\">               .title(<span class=\"string\">&quot;瑞吉外卖&quot;</span>)</span><br><span class=\"line\">               .version(<span class=\"string\">&quot;1.0&quot;</span>)</span><br><span class=\"line\">               .description(<span class=\"string\">&quot;瑞吉外卖项目接口文档&quot;</span>)</span><br><span class=\"line\">               .build();</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>设置静态资源映射</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addResourceHandlers</span><span class=\"params\">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;/backend/**&quot;</span>).addResourceLocations(<span class=\"string\">&quot;classpath:/backend/&quot;</span>);</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;/front/**&quot;</span>).addResourceLocations(<span class=\"string\">&quot;classpath:/front/&quot;</span>);</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;doc.html&quot;</span>).addResourceLocations(<span class=\"string\">&quot;classpath:/METE-INF/resources/&quot;</span>);</span><br><span class=\"line\">        registry.addResourceHandler(<span class=\"string\">&quot;/webjars/**&quot;</span>).addResourceLocations(<span class=\"string\">&quot;classpath:/METE-INF/resources/webjars&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p><strong>配置不需要拦截的请求路径</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;/doc.html&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;/webjars/**&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;/swagger-resources&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;/v2/api-docs&quot;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"常用注解\"><a class=\"markdownIt-Anchor\" href=\"#常用注解\">#</a> 常用注解</h3>\n<table>\n<thead>\n<tr>\n<th>@Api</th>\n<th>用于请求的类上，比如 Controller，表示对类的说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@ApiModel</td>\n<td>用在类上，通常是表示实体类，表示一个返回响应数据的信息</td>\n</tr>\n<tr>\n<td>@ApiModelProperty</td>\n<td>用在效应类的属性上</td>\n</tr>\n<tr>\n<td>@ApiOperation</td>\n<td>用在请求的方法上，说明方法的用途，作用</td>\n</tr>\n<tr>\n<td>@ApilmplicitParams</td>\n<td>用在用在请求的方法上，表示一组参数的说明</td>\n</tr>\n<tr>\n<td>@ApilmplicitParam</td>\n<td>用在 @ApilmplicitParams 注解中，指定一个请求参数的各个方面</td>\n</tr>\n<tr>\n<td>@ApiParam</td>\n<td>直接作用于请求方法的参数</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Swagger"
            ]
        }
    ]
}