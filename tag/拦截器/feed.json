{
    "version": "https://jsonfeed.org/version/1",
    "title": "不利索の鸣 • All posts by \"拦截器\" tag",
    "description": "欢迎来到鸣崽的空间，这里不仅有学习，还有生活",
    "home_page_url": "https://prehitting.gitee.io",
    "items": [
        {
            "id": "https://prehitting.gitee.io/2022/05/06/SpringBoot%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/",
            "url": "https://prehitting.gitee.io/2022/05/06/SpringBoot%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95/",
            "title": "SpringBoot拦截器配置方法",
            "date_published": "2022-05-06T05:29:28.000Z",
            "content_html": "<h2 id=\"项目需求\"><a class=\"markdownIt-Anchor\" href=\"#项目需求\">#</a> 项目需求</h2>\n<pre><code>在用户浏览部分页面前，检测用户是否已经登录过，若登录过，则允许访问，\n若未登陆过，则拦截目标页面的访问，并跳转至登录界面\n</code></pre>\n<h2 id=\"配置方法\"><a class=\"markdownIt-Anchor\" href=\"#配置方法\">#</a> 配置方法</h2>\n<h3 id=\"步骤一\"><a class=\"markdownIt-Anchor\" href=\"#步骤一\">#</a> 步骤一</h3>\n<p>创建 inteceptor 包，创建 LoginInteceptor 类</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LoginInterceptor</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">HandlerInterceptor</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 检测全局session对象中是否有uid数据，如果有则放行，若没有则重定向到登陆界面</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> request 请求对象</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> response 响应对象</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> handler 处理器（url+Controller，映射）</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span> true则放行，false拦截</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@throws</span> Exception</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"type\">boolean</span> <span class=\"title function_\">preHandle</span><span class=\"params\">(HttpServletRequest request,</span></span><br><span class=\"line\"><span class=\"params\">                             HttpServletResponse response,</span></span><br><span class=\"line\"><span class=\"params\">                             Object handler)</span> <span class=\"keyword\">throws</span> Exception &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        Object obj=request.getSession().getAttribute(<span class=\"string\">&quot;uid&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (obj==<span class=\"literal\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//用户没有登录过系统</span></span><br><span class=\"line\">            response.sendRedirect(<span class=\"string\">&quot;/web/index.html&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤二\"><a class=\"markdownIt-Anchor\" href=\"#步骤二\">#</a> 步骤二</h3>\n<pre><code>在config包下创建LoginInterceptorConfig类实现WebMvcConfigure类注册拦截器\n</code></pre>\n<blockquote>\n<p>registry.addInterceptor () 用于注册拦截器<br>\n addPathPatterns (&quot;/**&quot;) 意为拦截所有页面，参数是需要拦截的页面<br>\n excludePathPatterns () 参数是不需要拦截的页面</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 拦截器注册</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@Configuration</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">LoginInterceptorConfig</span> <span class=\"keyword\">implements</span> <span class=\"title class_\">WebMvcConfigurer</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    HandlerInterceptor interceptor=<span class=\"keyword\">new</span> <span class=\"title class_\">LoginInterceptor</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">addInterceptors</span><span class=\"params\">(InterceptorRegistry registry)</span> &#123;</span><br><span class=\"line\">        List&lt;String&gt; patterns = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/bootstrap3/**&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/css/**&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/images/**&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/js/**&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/web/register.html&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/web/index.html&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/web/login.html&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/web/product.html&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/users/reg&quot;</span>);</span><br><span class=\"line\">        patterns.add(<span class=\"string\">&quot;/users/login&quot;</span>);</span><br><span class=\"line\">        registry.addInterceptor(interceptor).addPathPatterns(<span class=\"string\">&quot;/**&quot;</span>).excludePathPatterns(patterns);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "SpringBoot",
                "拦截器"
            ]
        }
    ]
}